<% include ../partials/header %>

<% var schools = [
	"The University of British Columbia (UBC)",
	"Simon Fraser University (SFU)"
], faculties = [
	"Arts",
	"Science"
], majors = [
	"Cognitive Systems",
	"Computer Science"
] %>	

<div class="container mb-4">
	<div class="row justify-content-center">
		<div class="col-md-10">
			<form onsubmit="return confirm('Confirm changes');"
				  action="/profile/edit" enctype="multipart/form-data" method="POST">
				<h2 class="text-center mb-4"><i class="fas fa-user-graduate"></i> Edit Profile </h2>
				<hr>
				<div class="form-row">
					<div class="form-group col-md-12">
						<label>Email</label>
						<input type="email" class="form-control" name="user[email]" placeholder="Email" value="<%=user.email%>" required>
					</div>
				</div>
				
				<div class="form-row">
					<div class="form-group col-md-4">
						<label>First Name</label>
						<input type="text" class="form-control" name="user[firstName]" placeholder="First name" 
							   value="<%=user.firstName%>" required>
					</div>
					<div class="form-group col-md-4">
						<label>Middle Name</label>
						<input type="text" class="form-control" name="user[middleName]" placeholder="Middle name" value="<%=user.middleName%>">
					</div>
					<div class="form-group col-md-4">
						<label>Last Name</label>
						<input type="text" class="form-control" name="user[lastName]" placeholder="Last name" 
							   value="<%=user.lastName%>" required>
					</div>
				</div>
				
				<div class="form-row">
					<div class="form-group col-md-4">
						<label>School</label>
						<select class="form-control" name="user[school]" required>
							<% schools.forEach((school) => { %>
								<option value="<%=school%>" 
										<% if(user.school === school) { %> selected <%}%>>
									<%= school %>
								</option>
							<% }); %>
						</select>
					</div>
					<div class="form-group col-md-4">
						<label>Faculty</label>
						<select class="form-control" name="user[faculty]" required>
							<% faculties.forEach((faculty) => { %>
								<option value="<%=faculty%>" 
										<% if(user.faculty === faculty) { %> selected <%}%>>
									<%= faculty %>
								</option>
							<% }); %>
						</select>
					</div>
					<div class="form-group col-md-4">
						<label>Major</label>
						<select class="form-control" name="user[major]" required>
							<% majors.forEach((major) => { %>
								<option value="<%=major%>" 
										<% if(user.major === major) { %> selected <%}%>>
									<%= major %>
								</option>
							<% }); %>
						</select>
					</div>
				</div>
				
				<div class="form-group">
					<label>Expected Graduation</label>
					<select class="form-control" name="user[graduation]" required>
						<% for(let i=0; i < 10; i++) {
							var val = moment().add(i, 'Y').format('YYYY'); %>
						<option value="<%= val %>" <% if(moment(user.graduation).format('YYYY') == val) { %> selected <% } %>>
							<%=val%>
						</option>
						<% } %>
					</select>
				</div>
				
				<div class="input-group my-4">
					<div class="input-group-prepend">
						<span class="input-group-text" id="inputGroupFileAddon01">Resume</span>
					</div>
					<div class="custom-file">
						<input type="file" class="custom-file-input" name="resume" id="inputGroupFile01" 
							   aria-describedby="inputGroupFileAddon01">
						<label class="custom-file-label" for="inputGroupFile01">Choose file</label>
					</div>
				</div>
				
				<div class="form-row">
					<div class="col-md-3">
						<button type="submit" class="btn btn-outline-primary btn-block">Save</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>

<% include ../partials/footer %>