<% include ../partials/header %>

<div class="container">
	<%= user._id %>
	<ul class="nav nav-tabs" id="myTab" role="tablist">
		<li class="nav-item">
			<a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" 
			aria-selected="true">Profile</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" id="saved-jobs-tab" data-toggle="tab" href="#saved-jobs" role="tab" aria-controls="saved-jobs" 
			aria-selected="false">Jobs Posted</a>
		</li>
		<li class="nav-item ml-auto">
			<a class="nav-link" href="/jobs/new">Add Posting + </a>
		</li>
	</ul>
	
	<div class="tab-content" id="myTabContent">
		<div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
			
			<a href="profile/edit" class="btn btn-outline-primary btn-block my-3">Edit Profile</a>

			<div class="row mt-3">
				<div class="col-md-4">
					<p class="lead font-weight-bold mb-0">Full name:</p>
					<p class="lead"><%= user.firstName + " " + user.middleName + " " + user.lastName %></p>
				</div>

				<div class="col-md-4">
					<p class="lead font-weight-bold mb-0">Email:</p>
					<p class="lead"><%= user.email %></p>
				</div>
				
				<div class="col-md-4">
					<p class="lead font-weight-bold mb-1">Institution:</p>
					<p class="lead"><%= user.company %></p>
				</div>
				
				<div class="col-12">
					<hr>
				</div>
			</div>
		</div>
		
		<div class="tab-pane fade" id="saved-jobs" role="tabpanel" aria-labelledby="saved-jobs-tab">
			<div class="list-group my-4">
				<% user.jobsPosted.reverse(); var i=1; user.jobsPosted.forEach((job) => { %>
					<a href="/jobs/<%= job._id %>" class="list-group-item list-group-item-action">
						<div class="d-flex w-100 justify-content-between">
							<h5 class="mb-0"><%= i %>. <%= job.role %></h5>
							<form action="/jobs/<%= job._id %>/applicants" style="display: inline">
								<button class="btn btn-outline-primary">View Applicants</button>
							</form>
						</div>
						<p class="lead mb-0"><%= job.company %></p>
						<p><%= job.location %></p>	
					</a>
				<% i+=1;
				}); %>
			</div>
		</div>		
	</div>
	
</div>

<% include ../partials/footer %>