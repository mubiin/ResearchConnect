<% var activeHome = "", activeJob = "", activeSignup = "", activeLogin = "", activeProfile = "";
if (currentPath == "/") {
	activeHome = "active";
} else if (currentPath == "/jobs") {
	activeJob = "active";
} else if (currentPath.includes("register")) {
	activeSignup = "active";
} else if (currentPath.includes("login")) {
	activeLogin = "active";
} else if (currentPath.includes("profile")) {
	activeProfile = "active";
} %>

<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	
	<!-- Font Awesome -->  
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" 
	integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
	
	<link rel="stylesheet" href="/stylesheets/style.css">
	
	<script src="https://cloud.tinymce.com/5/tinymce.min.js?apiKey=ihunqbym9mdtnh064h6nft1g4d63ze2mm4y3ljjv0hrfavtd"></script>
</head>
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4 mb-lg-5 fixed-top">
		<div class="container" id="navbar-container">
			<a class="navbar-brand" href="/">ResearchConnect</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" 
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarNav">

			<ul class="navbar-nav">
				<li class="nav-item <%=activeHome%>">
					<a class="nav-link" href="/">Home</a>
				</li>
				<li class="nav-item <%=activeJob%>">
					<a class="nav-link" href="/jobs">Jobs</a>
				</li>
				<form class="form-inline my-2 my-lg-0 mr-sm-2 ml-md-2" action="/jobs" method="GET">
					<input class="form-control mr-sm-2" type="search" name="search" placeholder="Search jobs" aria-label="Search" 
					<% if (typeof search !== 'undefined' && search) { %> value="<%=search%>" <% } %>>
					<button class="btn btn-success my-2 my-sm-0" type="submit">Search</button>
				</form>
			</ul>
			
			

			<ul class="navbar-nav ml-auto">
				
				<% if (!currentUser) { %>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle <%=activeSignup%>" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" 
						aria-expanded="false">Signup</a>
						<div class="dropdown-menu">
							<a class="dropdown-item" href="/register/student" id="menuStudent">Student</a>
							<a class="dropdown-item" href="/register/employer">Employer</a>
						</div>
					</li>
					
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle <%=activeLogin%>" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" 
							aria-expanded="false">Login</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/login/student">Student</a>
								<a class="dropdown-item" href="/login/employer">Employer</a>
							</div>
						</li>
						
						<% } else { %>
						<li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Notifications <span class="badge"><%= notifications.length %></span></a>
                          <ul class="dropdown-menu">
                            <li>
                                <a href="/notifications">View past notifications</a>
                            </li>
                            <% notifications.forEach(function(notification) { %>                          
                                <li>
                                    <a href="/notifications/<%= notification.id %>">
                                        <%= notification.text %>
                                    </a>
                                </li>
                            <% }); %>
                          </ul>
                        </li>
						<li class="nav-item <%=activeProfile%>">
							<a class="nav-link" href="/profile">Profile</a>
						</li>
						
						<li class="nav-item">
							<a class="nav-link" href="/logout">Logout</a>
						</li>
						<% } %>
					</ul>
				</div>
			</div>
		</nav>
	
	<% if (currentUser && !currentUser.isVerified && currentPath !== "/verify") { %>
		<div class="container">
			<div class="alert alert-warning mb-0" role="alert">
				Please verify your email: <%= currentUser.email %> | 
				<form action="/verify/resend" method="POST" class="d-inline">
					<button class="btn btn-sm btn-outline-primary">
						Resend email
					</button>
				</form>
			</div>
		</div>
	<% } %>
		
		<% if (error != "") { %>
			<div class="container">
				<div class="alert alert-danger" role="alert">
					<%= error %>
				</div>
			</div>
		<% } %>
	
		<% if (success != "") { %>
			<div class="container">
				<div class="alert alert-success" role="alert">
					<%= success %>
				</div>
			</div>
		<% } %>
<body>
	